<?php
/**
 * Created by PhpStorm.
 * User: Ivan
 * Date: 26-Apr-18
 * Time: 13:14
 */

namespace App\Http\Controllers\Admin;

use Backpack\CRUD\app\Http\Controllers\CrudController;
use App\Http\Requests\Admin\ScheduleCrudRequest as StoreRequest;
use App\Http\Requests\Admin\ScheduleCrudRequest as UpdateRequest;
use Illuminate\Http\Request;


class ScheduleCrudController extends CrudController
{

    public function setup()
    {
        $this->crud->setModel('App\Models\Schedule');
        $this->crud->setRoute('admin/schedule');
        $this->crud->setEntityNameStrings('schedule', 'schedules');
        $this->crud->setCreateView('lms/admin/schedule_create');


        //getting a list of all courses
        $courses = \App\Models\Course::all()->pluck('title','id')->toArray();

        //clearing the HTML tags from the names
        foreach ($courses as $key => $value) {
            $courses[$key] = strip_tags($value);
        }


        $this->crud->setColumns([
            [
                'name' => 'id',
                'label' => 'ID'
            ],
            [
                'name' => 'name',
                'label' => 'Name'
            ],
            [
                'name' => 'course_id',
                'label' => 'Course ID'
            ],
            [
                'name' => 'schedule_type',
                'label' => 'Schedule Type'
            ]
        ]);
    }

    public function store(StoreRequest $request)
    {
        dd($request);
        return parent::storeCrud(); // TODO: Change the autogenerated stub


    }

    public function update(UpdateRequest $request)
    {
        return parent::updateCrud(); // TODO: Change the autogenerated stub
    }

}